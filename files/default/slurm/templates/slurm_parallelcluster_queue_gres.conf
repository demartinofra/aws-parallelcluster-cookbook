# This file is automatically generated by pcluster

{% for instance in queue.instances %}
{%- if instance.gpus > 0 -%}
{%- set has_static_nodes = true if instance.static_size != 0 else false -%}
{%- set has_dynamic_nodes = true if instance.dynamic_size > 0 else false -%}
{% if has_static_nodes -%}
NodeName={{ queue.queue_name }}-static-{{ instance.type }}[1-{{ instance.static_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ instance.gpus - 1 }}]
{% endif -%}
{% if has_dynamic_nodes -%}
NodeName={{ queue.queue_name }}-dynamic-{{ instance.type }}[1-{{ instance.dynamic_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ instance.gpus - 1 }}]
{% endif -%}
{%- endif -%}
{% endfor %}
